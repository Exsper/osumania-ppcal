(function(){var t={4773:function(t){class o{constructor(t){this.isConvert=t.isConvert,this.mapKeys=t.mapKeys,this.playKeys=t.playKeys,this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.isHR=t.isHR,this.isEZ=t.isEZ,this.isDT=t.isDT,this.isHT=t.isHT,this.isNF=t.isNF,this.score=t.score,this.maxScore=1e6,this._score=this.getComputeScore(),this.difficultyValue=this.computeDifficultyValue(),this.accuracyValue=this.computeAccuracyValue(),this.totalValue=this.computeTotalValue()}computeDifficultyValue(){let t=1,o=Math.pow(5*Math.max(1,this.sr/.2)-4,2.2)/135;t*=o;let s=1+.1*Math.min(1,this.objCount/1500);t*=s;let n=0,e=this._score;return n=e<=5e5?0:e<=6e5?(e-5e5)/1e5*.3:e<=7e5?.3+(e-6e5)/1e5*.25:e<=8e5?.55+(e-7e5)/1e5*.2:e<=9e5?.75+(e-8e5)/1e5*.15:.9+(e-9e5)/1e5*.1,t*=n,t}getComputeScore(){let t=this.getScoreMultiplier();return this.maxScore=parseInt(this.maxScore*t),this.score/t}getScoreMultiplier(){let t=1;if(this.isConvert){let o=this.playKeys-this.mapKeys;o>0?t*=.9:o<0&&(t*=.9+.04*o)}return t*Math.pow(.5,this.isEZ+this.isHT+this.isNF)}computeAccuracyValue(){return Math.max(0,.2-.006667*(this.getHitWindow300()-34))*this.difficultyValue*Math.pow(Math.max(0,this._score-96e4)/4e4,1.1)}getHitWindow300(){const t=t=>(this.isHR?t/=1.4:this.isEZ&&(t*=1.4),t);if(!this.isConvert){let o=Math.min(10,Math.max(0,10-this.od));return t(34+3*o)}return this.od>=5?t(34):t(47)}computeTotalValue(){let t=.8;return this.isNF&&(t*=.9),this.isEZ&&(t*=.5),Math.pow(Math.pow(this.difficultyValue,1.1)+Math.pow(this.accuracyValue,1.1),1/1.1)*t}}t.exports=o},1149:function(t,o,s){const n=s(6265)["default"];class e{static async search(t){const o="https://api.sayobot.cn/v2/beatmapinfo?T=1&K="+t,s=await n.get(o);if(!s.data.data)throw"获取谱面详情失败";let e;if(s.data.data.bid_data.map((o=>{o.bid===t&&(e=o)})),!e)throw"查不到该谱面信息";if(3!==e.mode)throw"该谱面不是mania专谱";return{od:e.OD,sr:e.star,objCount:e.circles+e.sliders}}}t.exports=e},7248:function(t,o,s){"use strict";var n=s(9242),e=s(3396),i=s(7139);const a={class:"app-tab"},l=(0,e.Uk)("mania pp计算"),r=(0,e.Uk)("小夜帮填"),u=(0,e.Uk)("关于"),h={class:"app-content"};function c(t,o,s,n,c,d){const p=(0,e.up)("router-link"),_=(0,e.up)("router-view");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",a,[(0,e.Wm)(p,{to:"/"},{default:(0,e.w5)((()=>[l])),_:1}),(0,e.Wm)(p,{to:"/sayo"},{default:(0,e.w5)((()=>[r])),_:1}),(0,e.Wm)(p,{to:"/about"},{default:(0,e.w5)((()=>[u])),_:1}),(0,e._)("span",{class:"spanlang",onClick:o[0]||(o[0]=(...t)=>d.changeLaguages&&d.changeLaguages(...t))},(0,i.zw)(c.langText),1)]),(0,e._)("div",h,[(0,e.Wm)(_)])],64)}var d={data(){return{lang:"zh",langText:"简体中文"}},name:"App",methods:{changeLaguages(){this.lang="zh"===this.$i18n.locale?"en":"zh",this.$i18n.locale=this.lang,this.langText="zh"===this.lang?"简体中文":"English"}}},p=s(89);const _=(0,p.Z)(d,[["render",c],["__scopeId","data-v-7f682691"]]);var m=_,g=s(678);const y=t=>((0,e.dD)("data-v-9d2cf46e"),t=t(),(0,e.Cn)(),t),b={class:"home"},f={for:"isConvert"},w=["hidden"],v=["hidden"],C=["hidden"],D=["hidden"],M=y((()=>(0,e._)("br",null,null,-1))),H=y((()=>(0,e._)("br",null,null,-1))),T=["hidden"],O=["hidden"],x=y((()=>(0,e._)("br",null,null,-1))),K=y((()=>(0,e._)("br",null,null,-1))),z=y((()=>(0,e._)("span",null,"Mods：",-1))),j=y((()=>(0,e._)("br",null,null,-1))),E=y((()=>(0,e._)("span",null,"Mods：",-1))),V=y((()=>(0,e._)("br",null,null,-1))),Z=y((()=>(0,e._)("br",null,null,-1))),k=y((()=>(0,e._)("br",null,null,-1)));function S(t,o,s,a,l,r){return(0,e.wg)(),(0,e.iD)("div",b,[(0,e.wy)((0,e._)("input",{type:"checkbox",id:"isConvert","onUpdate:modelValue":o[0]||(o[0]=t=>l.isConvert=t),onChange:o[1]||(o[1]=(...t)=>r.cal&&r.cal(...t))},null,544),[[n.e8,l.isConvert]]),(0,e._)("label",f,(0,i.zw)(t.$t("message.option_mapIsConvert")),1),(0,e._)("span",{hidden:!1===l.isConvert},(0,i.zw)(t.$t("message.option_mapKeys")),9,w),(0,e.wy)((0,e._)("input",{class:"short","onUpdate:modelValue":o[2]||(o[2]=t=>l.mapKeys=t),onInput:o[3]||(o[3]=(...t)=>r.changeMapKeys&&r.changeMapKeys(...t)),hidden:!1===l.isConvert},null,40,v),[[n.nr,l.mapKeys,void 0,{number:!0}]]),(0,e._)("span",{hidden:!1===l.isConvert},(0,i.zw)(t.$t("message.option_playKeys")),9,C),(0,e.wy)((0,e._)("input",{class:"short","onUpdate:modelValue":o[4]||(o[4]=t=>l.playKeys=t),onInput:o[5]||(o[5]=(...t)=>r.cal&&r.cal(...t)),hidden:!1===l.isConvert},null,40,D),[[n.nr,l.playKeys,void 0,{number:!0}]]),M,(0,e._)("span",null,(0,i.zw)(t.$t("message.option_stars_with_mods"))+" ★",1),(0,e.wy)((0,e._)("input",{class:"short","onUpdate:modelValue":o[6]||(o[6]=t=>l.sr=t),onInput:o[7]||(o[7]=(...t)=>r.cal&&r.cal(...t))},null,544),[[n.nr,l.sr,void 0,{number:!0}]]),H,(0,e._)("span",null,(0,i.zw)(t.$t("message.option_od_without_mods"))+" OD",1),(0,e.wy)((0,e._)("input",{class:"short","onUpdate:modelValue":o[8]||(o[8]=t=>l.od=t),onInput:o[9]||(o[9]=(...t)=>r.OD2ModOD&&r.OD2ModOD(...t))},null,544),[[n.nr,l.od,void 0,{number:!0}]]),(0,e._)("span",{hidden:!(!0===l.isHR||!0===l.isEZ)},(0,i.zw)(t.$t("message.option_od_with_mods"))+" OD",9,T),(0,e.wy)((0,e._)("input",{class:"short",hidden:!(!0===l.isHR||!0===l.isEZ),"onUpdate:modelValue":o[10]||(o[10]=t=>l.od_mod=t),onInput:o[11]||(o[11]=(...t)=>r.ModOD2OD&&r.ModOD2OD(...t))},null,40,O),[[n.nr,l.od_mod,void 0,{number:!0}]]),x,(0,e._)("span",null,(0,i.zw)(t.$t("message.option_objCount")),1),(0,e.wy)((0,e._)("input",{class:"mid","onUpdate:modelValue":o[12]||(o[12]=t=>l.objCount=t),onInput:o[13]||(o[13]=(...t)=>r.cal&&r.cal(...t))},null,544),[[n.nr,l.objCount,void 0,{number:!0}]]),K,z,(0,e._)("button",{class:(0,i.C_)(l.isEZ?"checkedmod":""),onClick:o[14]||(o[14]=(...t)=>r.changeEZ&&r.changeEZ(...t))},"EZ",2),(0,e._)("button",{class:(0,i.C_)(l.isHT?"checkedmod":""),onClick:o[15]||(o[15]=(...t)=>r.changeHT&&r.changeHT(...t))},"HT",2),(0,e._)("button",{class:(0,i.C_)(l.isNF?"checkedmod":""),onClick:o[16]||(o[16]=(...t)=>r.changeNF&&r.changeNF(...t))},"NF",2),j,E,(0,e._)("button",{class:(0,i.C_)(l.isHR?"checkedmod":""),onClick:o[17]||(o[17]=(...t)=>r.changeHR&&r.changeHR(...t))},"HR",2),(0,e._)("button",{class:(0,i.C_)(l.isDT?"checkedmod":""),onClick:o[18]||(o[18]=(...t)=>r.changeDT&&r.changeDT(...t))},"DT",2),V,(0,e._)("span",null,(0,i.zw)(t.$t("message.option_score")),1),(0,e.wy)((0,e._)("input",{class:"mid","onUpdate:modelValue":o[19]||(o[19]=t=>l.score=t),onInput:o[20]||(o[20]=(...t)=>r.cal&&r.cal(...t))},null,544),[[n.nr,l.score,void 0,{number:!0}]]),(0,e._)("span",null,(0,i.zw)(t.$t("message.option_maxScore"))+(0,i.zw)(l.maxScore),1),Z,k,(0,e._)("span",null,"PP："+(0,i.zw)(l.pp),1)])}var F=s(4773),$=s.n(F),R={name:"HomeView",data(){return{isConvert:!1,mapKeys:4,playKeys:4,sr:8,od:8,od_mod:8,objCount:2e3,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:1e6,pp:this.$i18n.messages[this.$i18n.locale].message.info_enter_data,maxScore:1e6}},methods:{OD2ModOD(){this.isEZ?this.od_mod=this.od/2:this.isHR?this.od_mod=Math.min(1.4*this.od,10).toFixed(2):this.od_mod=this.od,this.cal()},ModOD2OD(){this.isEZ?this.od=2*this.od_mod:this.isHR?this.od_mod>=10?this.od="???":this.od=(this.od_mod/1.4).toFixed(2):this.od=this.od_mod,this.cal()},changeMapKeys(){this.playKeys=this.mapKeys,this.cal()},cal(){if("???"===this.od)this.pp="???";else{let t={isConvert:this.isConvert,mapKeys:this.mapKeys,playKeys:this.playKeys,sr:this.sr,od:this.od,objCount:this.objCount,isHR:this.isHR,isEZ:this.isEZ,isDT:this.isDT,isHT:this.isHT,isNF:this.isNF,score:this.score},o=new($())(t);this.pp=o.totalValue.toFixed(2),this.maxScore=o.maxScore,(this.score>this.maxScore||this.score===this.maxScore/2)&&(this.score=this.maxScore,this.cal())}},changeHR(){this.isHR=!this.isHR,this.isEZ=!1,this.OD2ModOD()},changeEZ(){this.isEZ=!this.isEZ,this.isHR=!1,this.OD2ModOD()},changeDT(){this.isDT=!this.isDT,this.isHT=!1,this.cal()},changeHT(){this.isHT=!this.isHT,this.isDT=!1,this.cal()},changeNF(){this.isNF=!this.isNF,this.cal()}}};const I=(0,p.Z)(R,[["render",S],["__scopeId","data-v-9d2cf46e"]]);var N=I;const U={class:"about"},W=(0,e._)("p",null,"更新日期：2022-3-19",-1),P=(0,e._)("p",null,"由 Exsper 创建",-1),A=(0,e._)("p",null,[(0,e.Uk)(" 有任何问题或建议可以"),(0,e._)("a",{href:"https://github.com/Exsper/osumania-ppcal/issues",target:"_blank"},"提交issue")],-1),L=[W,P,A];function G(t,o){return(0,e.wg)(),(0,e.iD)("div",U,L)}const Y={},q=(0,p.Z)(Y,[["render",G]]);var B=q;const J=t=>((0,e.dD)("data-v-1a2f7ca0"),t=t(),(0,e.Cn)(),t),Q={class:"home"},X=J((()=>(0,e._)("br",null,null,-1))),tt=J((()=>(0,e._)("span",null,"bid：",-1))),ot=J((()=>(0,e._)("br",null,null,-1))),st=J((()=>(0,e._)("br",null,null,-1))),nt=J((()=>(0,e._)("br",null,null,-1))),et=J((()=>(0,e._)("br",null,null,-1))),it=J((()=>(0,e._)("br",null,null,-1)));function at(t,o,s,a,l,r){return(0,e.wg)(),(0,e.iD)("div",Q,[(0,e._)("span",null,(0,i.zw)(t.$t("message.option_sayo_only_mania_no_mod")),1),X,tt,(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>l.bid=t)},null,512),[[n.nr,l.bid,void 0,{number:!0}]]),(0,e._)("button",{onClick:o[1]||(o[1]=(...t)=>r.getData&&r.getData(...t))},(0,i.zw)(t.$t("message.button_get_data_from_sayo")),1),ot,(0,e._)("span",null,(0,i.zw)(t.$t("message.option_stars"))+" ★"+(0,i.zw)(l.sr),1),st,(0,e._)("span",null,(0,i.zw)(t.$t("message.option_od"))+" "+(0,i.zw)(l.od),1),nt,(0,e._)("span",null,(0,i.zw)(t.$t("message.option_objCount"))+" "+(0,i.zw)(l.objCount),1),et,(0,e._)("span",null,(0,i.zw)(t.$t("message.option_score")),1),(0,e.wy)((0,e._)("input",{class:"mid","onUpdate:modelValue":o[2]||(o[2]=t=>l.score=t),onInput:o[3]||(o[3]=(...t)=>r.cal&&r.cal(...t))},null,544),[[n.nr,l.score,void 0,{number:!0}]]),it,(0,e._)("span",null,"PP："+(0,i.zw)(l.pp),1)])}var lt=s(1149),rt=s.n(lt),ut={name:"SayobotFastView",data(){return{bid:1234567,sr:8,od:8,objCount:2e3,score:1e6,pp:this.$i18n.messages[this.$i18n.locale].message.info_enter_data}},methods:{cal(){let t={isConvert:!1,sr:this.sr,od:this.od,objCount:this.objCount,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:this.score},o=new($())(t);this.pp=o.totalValue.toFixed(2)},async getData(){try{let t=await rt().search(this.bid);console.log(t),this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.cal()}catch(t){this.pp=t}}}};const ht=(0,p.Z)(ut,[["render",at],["__scopeId","data-v-1a2f7ca0"]]);var ct=ht;const dt=[{path:"/",name:"home",component:N},{path:"/sayo",name:"sayo",component:ct},{path:"/about",name:"about",component:B}],pt=(0,g.p7)({history:(0,g.r5)(),routes:dt});var _t=pt,mt=s(6623),gt=(0,mt.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),yt=s(3490),bt={page_mania_pp_cal:"Mania PP Calculation",page_mania_pp_cal_sayo:"Get Mapdata From Sayo",page_about:"About",option_mapIsConvert:"Converted",option_mapKeys:"Default Keys:",option_playKeys:"Play Keys:",option_stars:"Stars:",option_stars_with_mods:"Stars(With Mod):",option_od_without_mods:"OD(Without Mod):",option_od_with_mods:"With Mod:",option_od:"OD:",option_objCount:"Objects:",option_score:"Score:",option_maxScore:"Max Score:",option_sayo_only_mania_no_mod:"Mania Map Without Any Mod Only!",button_get_data_from_sayo:"Get Map Data",info_enter_data:"Calculate When Entering Data"},ft={page_mania_pp_cal:"mania pp计算",page_mania_pp_cal_sayo:"小夜帮填",page_about:"关于",option_mapIsConvert:"转谱",option_mapKeys:"谱面默认键数：",option_playKeys:"游玩键数：",option_stars:"谱面星数：",option_stars_with_mods:"谱面星数（Mod加成后）：",option_od_without_mods:"谱面OD（Mod加成前）：",option_od_with_mods:"加成后：",option_od:"谱面OD：",option_objCount:"谱面物件数：",option_score:"得分：",option_maxScore:"满分：",option_sayo_only_mania_no_mod:"仅只支持mania专谱的无mod成绩！",button_get_data_from_sayo:"从小夜获取数据",info_enter_data:"输入数据立即计算"};const wt=(0,yt.o)({locale:"zh",messages:{en:{message:bt},zh:{message:ft}}});(0,n.ri)(m).use(gt).use(_t).use(wt).mount("#app")}},o={};function s(n){var e=o[n];if(void 0!==e)return e.exports;var i=o[n]={exports:{}};return t[n](i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(o,n,e,i){if(!n){var a=1/0;for(h=0;h<t.length;h++){n=t[h][0],e=t[h][1],i=t[h][2];for(var l=!0,r=0;r<n.length;r++)(!1&i||a>=i)&&Object.keys(s.O).every((function(t){return s.O[t](n[r])}))?n.splice(r--,1):(l=!1,i<a&&(a=i));if(l){t.splice(h--,1);var u=e();void 0!==u&&(o=u)}}return o}i=i||0;for(var h=t.length;h>0&&t[h-1][2]>i;h--)t[h]=t[h-1];t[h]=[n,e,i]}}(),function(){s.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(o,{a:o}),o}}(),function(){s.d=function(t,o){for(var n in o)s.o(o,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){var t={143:0};s.O.j=function(o){return 0===t[o]};var o=function(o,n){var e,i,a=n[0],l=n[1],r=n[2],u=0;if(a.some((function(o){return 0!==t[o]}))){for(e in l)s.o(l,e)&&(s.m[e]=l[e]);if(r)var h=r(s)}for(o&&o(n);u<a.length;u++)i=a[u],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(h)},n=self["webpackChunkosumania_ppcal"]=self["webpackChunkosumania_ppcal"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(7248)}));n=s.O(n)})();