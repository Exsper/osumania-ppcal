(function(){var t={5500:function(t){class e{constructor(t){this.isConvert=t.isConvert,this.mapKeys=t.mapKeys,this.playKeys=t.playKeys,this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.isHR=t.isHR,this.isEZ=t.isEZ,this.isDT=t.isDT,this.isHT=t.isHT,this.isNF=t.isNF,this.score=t.score,this.maxScore=1e6,this._score=this.getComputeScore(),this.difficultyValue=this.computeDifficultyValue(),this.accuracyValue=this.computeAccuracyValue(),this.totalValue=this.computeTotalValue()}computeDifficultyValue(){let t=1,e=Math.pow(5*Math.max(1,this.sr/.2)-4,2.2)/135;t*=e;let o=1+.1*Math.min(1,this.objCount/1500);t*=o;let s=0,n=this._score;return s=n<=5e5?0:n<=6e5?(n-5e5)/1e5*.3:n<=7e5?.3+(n-6e5)/1e5*.25:n<=8e5?.55+(n-7e5)/1e5*.2:n<=9e5?.75+(n-8e5)/1e5*.15:.9+(n-9e5)/1e5*.1,t*=s,t}getComputeScore(){let t=this.getScoreMultiplier();return this.maxScore=parseInt(this.maxScore*t),this.score/t}getScoreMultiplier(){let t=1;if(this.isConvert){let e=this.playKeys-this.mapKeys;e>0?t*=.9:e<0&&(t*=.9+.04*e)}return t*Math.pow(.5,this.isEZ+this.isHT+this.isNF)}computeAccuracyValue(){return Math.max(0,.2-.006667*(this.getHitWindow300()-34))*this.difficultyValue*Math.pow(Math.max(0,this._score-96e4)/4e4,1.1)}getHitWindow300(){const t=t=>(this.isHR?t/=1.4:this.isEZ&&(t*=1.4),t);if(!this.isConvert){let e=Math.min(10,Math.max(0,10-this.od));return t(34+3*e)}return this.od>=5?t(34):t(47)}computeTotalValue(){let t=.8;return this.isNF&&(t*=.9),this.isEZ&&(t*=.5),Math.pow(Math.pow(this.difficultyValue,1.1)+Math.pow(this.accuracyValue,1.1),1/1.1)*t}}class o{constructor(t,e){this.data=t,this.maxScore=e}getX(){let t=50,e=[],o=parseInt((this.maxScore-this.data.score)/t);if(o<=0)return[this.data.score,this.maxScore];let s=this.data.score;for(let n=0;n<t;n++)e.push(s),s+=o;return e.push(this.maxScore),[...new Set(e)]}getTrace(){let t=this.getX(),o=t.map((t=>{let o=this.data;return o.score=t,new e(o).totalValue}));return{x:t,y:o,name:this.name,showlegend:!1,type:"scatter"}}getLayout(){let t={title:{text:"pp曲线"},xaxis:{title:{text:"得分"},exponentformat:"none",showgrid:!0,gridwidth:2},yaxis:{title:{text:"pp"},exponentformat:"none",showgrid:!0,gridwidth:2}};return t}}t.exports.m=e,t.exports.O=o},8909:function(t,e,o){const s=o(6265)["default"];class n{static async search(t){const e="https://api.sayobot.cn/v2/beatmapinfo?T=1&K="+t,o=await s.get(e);if(!o.data.data)throw"获取谱面详情失败";let n;if(o.data.data.bid_data.map((e=>{e.bid===t&&(n=e)})),!n)throw"查不到该谱面信息";if(3!==n.mode)throw"该谱面不是mania专谱";return{od:n.OD,sr:n.star,objCount:n.circles+n.sliders}}}t.exports=n},7095:function(t,e,o){"use strict";var s=o(9242),n=o(3396),a=o(7139);function i(t,e,o,s,i,l){const r=(0,n.up)("el-menu-item"),u=(0,n.up)("el-button"),d=(0,n.up)("el-menu"),p=(0,n.up)("router-view"),c=(0,n.up)("el-main");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(d,{"default-active":i.activeIndex,class:"el-menu-demo",mode:"horizontal",router:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{index:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.$t("message.page_mania_pp_cal")),1)])),_:1}),(0,n.Wm)(r,{index:"/sayo"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.$t("message.page_mania_pp_cal_sayo")),1)])),_:1}),(0,n.Wm)(u,{class:"langbtn",onClick:l.changeLaguages},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(i.langText),1)])),_:1},8,["onClick"])])),_:1},8,["default-active"]),(0,n.Wm)(c,{class:"app-content"},{default:(0,n.w5)((()=>[(0,n.Wm)(p)])),_:1})],64)}var l=o(4870),r=o(2864),u=o(9345),d=o(9740);o(6809),o(3402),o(4583),o(4567);const p=(0,l.iH)("/");var c={components:{ElButton:r.mi,ElMenu:u.Q8,ElMenuItem:u.E_,ElMain:d.b2},data(){return{activeIndex:p,lang:"zh",langText:"English"}},name:"App",methods:{changeLaguages(){this.lang="zh"===this.$i18n.locale?"en":"zh",this.$i18n.locale=this.lang,this.langText="zh"===this.lang?"English":"简体中文"}}},h=o(89);const m=(0,h.Z)(c,[["render",i],["__scopeId","data-v-0cc19187"]]);var _=m,y=o(678);const g=t=>((0,n.dD)("data-v-2053e3c2"),t=t(),(0,n.Cn)(),t),f={class:"home"},w=["hidden"],b=["hidden"],v=["hidden"],C=["hidden"],x=g((()=>(0,n._)("br",null,null,-1))),D=g((()=>(0,n._)("br",null,null,-1))),M=["hidden"],E=["hidden"],T=g((()=>(0,n._)("br",null,null,-1))),O=g((()=>(0,n._)("br",null,null,-1))),V=g((()=>(0,n._)("span",null,"Mods：",-1))),k=(0,n.Uk)("EZ"),H=(0,n.Uk)("NF"),W=(0,n.Uk)("HT"),z=(0,n.Uk)("HR"),S=(0,n.Uk)("DT"),K=g((()=>(0,n._)("br",null,null,-1))),j=g((()=>(0,n._)("br",null,null,-1))),I=g((()=>(0,n._)("br",null,null,-1))),R=g((()=>(0,n._)("br",null,null,-1))),Z=["hidden"],$=["hidden"];function F(t,e,o,i,l,r){const u=(0,n.up)("el-checkbox"),d=(0,n.up)("el-input-number"),p=(0,n.up)("el-col"),c=(0,n.up)("el-button"),h=(0,n.up)("el-row");return(0,n.wg)(),(0,n.iD)("div",f,[(0,n.Wm)(u,{modelValue:l.isConvert,"onUpdate:modelValue":e[0]||(e[0]=t=>l.isConvert=t),onChange:r.cal,size:"large",border:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.$t("message.option_mapIsConvert")),1)])),_:1},8,["modelValue","onChange"]),(0,n._)("span",{hidden:!1===l.isConvert},(0,a.zw)(t.$t("message.option_mapKeys")),9,w),(0,n.wy)((0,n._)("input",{class:"short","onUpdate:modelValue":e[1]||(e[1]=t=>l.mapKeys=t),onInput:e[2]||(e[2]=(...t)=>r.changeMapKeys&&r.changeMapKeys(...t)),hidden:!1===l.isConvert},null,40,b),[[s.nr,l.mapKeys,void 0,{number:!0}]]),(0,n._)("span",{hidden:!1===l.isConvert},(0,a.zw)(t.$t("message.option_playKeys")),9,v),(0,n.wy)((0,n._)("input",{class:"short","onUpdate:modelValue":e[3]||(e[3]=t=>l.playKeys=t),onInput:e[4]||(e[4]=(...t)=>r.cal&&r.cal(...t)),hidden:!1===l.isConvert},null,40,C),[[s.nr,l.playKeys,void 0,{number:!0}]]),x,(0,n._)("span",null,(0,a.zw)(t.$t("message.option_stars_with_mods"))+" ★",1),(0,n.Wm)(d,{"controls-position":"right",class:"mx-4",modelValue:l.sr,"onUpdate:modelValue":e[5]||(e[5]=t=>l.sr=t),precision:2,step:.1,onInput:r.cal},null,8,["modelValue","step","onInput"]),D,(0,n._)("span",null,(0,a.zw)(t.$t("message.option_od_without_mods"))+" OD",1),(0,n.wy)((0,n._)("input",{class:"short","onUpdate:modelValue":e[6]||(e[6]=t=>l.od=t),onInput:e[7]||(e[7]=(...t)=>r.OD2ModOD&&r.OD2ModOD(...t))},null,544),[[s.nr,l.od,void 0,{number:!0}]]),(0,n._)("span",{hidden:!(!0===l.isHR||!0===l.isEZ)},(0,a.zw)(t.$t("message.option_od_with_mods"))+" OD",9,M),(0,n.wy)((0,n._)("input",{class:"short",hidden:!(!0===l.isHR||!0===l.isEZ),"onUpdate:modelValue":e[8]||(e[8]=t=>l.od_mod=t),onInput:e[9]||(e[9]=(...t)=>r.ModOD2OD&&r.ModOD2OD(...t))},null,40,E),[[s.nr,l.od_mod,void 0,{number:!0}]]),T,(0,n._)("span",null,(0,a.zw)(t.$t("message.option_objCount")),1),(0,n.Wm)(d,{class:"mx-4",min:0,step:200,modelValue:l.objCount,"onUpdate:modelValue":e[10]||(e[10]=t=>l.objCount=t),onInput:r.cal},null,8,["modelValue","onInput"]),O,(0,n.Wm)(h,{gutter:20},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:3},{default:(0,n.w5)((()=>[V])),_:1}),(0,n.Wm)(p,{span:2},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{type:"primary",plain:"",class:(0,a.C_)(l.isEZ?"checkedmod":""),onClick:r.changeEZ},{default:(0,n.w5)((()=>[k])),_:1},8,["class","onClick"])])),_:1}),(0,n.Wm)(p,{span:2},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{type:"primary",plain:"",class:(0,a.C_)(l.isNF?"checkedmod":""),onClick:r.changeNF},{default:(0,n.w5)((()=>[H])),_:1},8,["class","onClick"])])),_:1}),(0,n.Wm)(p,{span:2},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{type:"primary",plain:"",class:(0,a.C_)(l.isHT?"checkedmod":""),onClick:r.changeHT},{default:(0,n.w5)((()=>[W])),_:1},8,["class","onClick"])])),_:1})])),_:1}),(0,n.Wm)(h,{gutter:20},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:2,offset:3},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{type:"primary",plain:"",class:(0,a.C_)(l.isHR?"checkedmod":""),onClick:r.changeHR},{default:(0,n.w5)((()=>[z])),_:1},8,["class","onClick"])])),_:1}),(0,n.Wm)(p,{span:2,offset:2},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{type:"primary",plain:"",class:(0,a.C_)(l.isDT?"checkedmod":""),onClick:r.changeDT},{default:(0,n.w5)((()=>[S])),_:1},8,["class","onClick"])])),_:1})])),_:1}),K,(0,n._)("span",null,(0,a.zw)(t.$t("message.option_score")),1),(0,n.Wm)(d,{class:"mx-4",min:0,max:1e6,step:1e5,modelValue:l.score,"onUpdate:modelValue":e[11]||(e[11]=t=>l.score=t),onInput:r.cal},null,8,["modelValue","onInput"]),(0,n._)("span",null,(0,a.zw)(t.$t("message.option_maxScore"))+(0,a.zw)(l.maxScore),1),j,I,(0,n._)("span",null,"PP："+(0,a.zw)(l.pp),1),R,(0,n._)("span",{hidden:l.plotlyReady},"折线图模块加载中....",8,Z),(0,n._)("div",{id:"graph",hidden:!1===l.plotlyReady},null,8,$)])}var U=o(5500),N=o(6588),P=o(6939),A=o(7610),B=o(5397),L=(o(88),o(6885),o(8908),o(8839),{components:{ElButton:r.mi,ElCheckbox:N.Xb,ElRow:P.dq,ElCol:A.Dv,ElInputNumber:B.d6},name:"HomeView",setup(){let t=document.createElement("script");t.setAttribute("src","https://cdn.plot.ly/plotly-latest.min.js"),document.getElementsByTagName("head")[0].appendChild(t)},data(){return{isConvert:!1,mapKeys:4,playKeys:4,sr:5,od:8,od_mod:8,objCount:1e3,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:1e6,pp:this.$i18n.messages[this.$i18n.locale].message.info_enter_data,maxScore:1e6,plotlyReady:!1}},methods:{OD2ModOD(){this.isEZ?this.od_mod=this.od/2:this.isHR?this.od_mod=Math.min(1.4*this.od,10).toFixed(2):this.od_mod=this.od,this.cal()},ModOD2OD(){this.isEZ?this.od=2*this.od_mod:this.isHR?this.od_mod>=10?this.od="???":this.od=(this.od_mod/1.4).toFixed(2):this.od=this.od_mod,this.cal()},changeMapKeys(){this.playKeys=this.mapKeys,this.cal()},cal(){if("???"===this.od)this.pp="???";else{let t={isConvert:this.isConvert,mapKeys:this.mapKeys,playKeys:this.playKeys,sr:this.sr,od:this.od,objCount:this.objCount,isHR:this.isHR,isEZ:this.isEZ,isDT:this.isDT,isHT:this.isHT,isNF:this.isNF,score:this.score},e=new U.m(t);if(this.pp=e.totalValue.toFixed(2),this.maxScore=e.maxScore,this.score>this.maxScore)return this.score=this.maxScore,void this.cal();if(this.score===this.maxScore/2)return this.score=this.maxScore,void this.cal();if(window.Plotly){this.plotlyReady=!0;let e=new U.O(t,this.maxScore);window.Plotly.newPlot("graph",[e.getTrace()],e.getLayout(),{scrollZoom:!0,responsive:!0})}}},changeHR(){this.isHR=!this.isHR,this.isEZ=!1,this.OD2ModOD()},changeEZ(){this.isEZ=!this.isEZ,this.isHR=!1,this.OD2ModOD()},changeDT(){this.isDT=!this.isDT,this.isHT=!1,this.cal()},changeHT(){this.isHT=!this.isHT,this.isDT=!1,this.cal()},changeNF(){this.isNF=!this.isNF,this.cal()}}});const X=(0,h.Z)(L,[["render",F],["__scopeId","data-v-2053e3c2"]]);var G=X;const q={class:"about"},Q=(0,n._)("p",null,"更新日期：2022-3-19",-1),Y=(0,n._)("p",null,"由 Exsper 创建",-1),J=(0,n._)("p",null,[(0,n.Uk)(" 有任何问题或建议可以"),(0,n._)("a",{href:"https://github.com/Exsper/osumania-ppcal/issues",target:"_blank"},"提交issue")],-1),tt=[Q,Y,J];function et(t,e){return(0,n.wg)(),(0,n.iD)("div",q,tt)}const ot={},st=(0,h.Z)(ot,[["render",et]]);var nt=st;const at=t=>((0,n.dD)("data-v-2dc81ff1"),t=t(),(0,n.Cn)(),t),it={class:"home"},lt=at((()=>(0,n._)("br",null,null,-1))),rt=at((()=>(0,n._)("span",null,"bid：",-1))),ut=at((()=>(0,n._)("br",null,null,-1))),dt=at((()=>(0,n._)("br",null,null,-1))),pt=at((()=>(0,n._)("br",null,null,-1))),ct=at((()=>(0,n._)("br",null,null,-1))),ht=at((()=>(0,n._)("br",null,null,-1))),mt=at((()=>(0,n._)("br",null,null,-1))),_t=["hidden"],yt=["hidden"];function gt(t,e,o,s,i,l){const r=(0,n.up)("el-input-number"),u=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",it,[(0,n._)("span",null,(0,a.zw)(t.$t("message.option_sayo_only_mania_no_mod")),1),lt,rt,(0,n.Wm)(r,{controls:!1,class:"mx-4",modelValue:i.bid,"onUpdate:modelValue":e[0]||(e[0]=t=>i.bid=t),onInput:l.cal},null,8,["modelValue","onInput"]),(0,n.Wm)(u,{type:"primary",onClick:l.getData},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.$t("message.button_get_data_from_sayo")),1)])),_:1},8,["onClick"]),ut,(0,n._)("span",null,(0,a.zw)(t.$t("message.option_stars"))+" ★"+(0,a.zw)(i.sr),1),dt,(0,n._)("span",null,(0,a.zw)(t.$t("message.option_od"))+" "+(0,a.zw)(i.od),1),pt,(0,n._)("span",null,(0,a.zw)(t.$t("message.option_objCount"))+" "+(0,a.zw)(i.objCount),1),ct,(0,n._)("span",null,(0,a.zw)(t.$t("message.option_score")),1),(0,n.Wm)(r,{class:"mx-4",min:0,max:1e6,step:1e5,modelValue:i.score,"onUpdate:modelValue":e[1]||(e[1]=t=>i.score=t),onInput:l.cal},null,8,["modelValue","onInput"]),ht,(0,n._)("span",null,"PP："+(0,a.zw)(i.pp),1),mt,(0,n._)("span",{hidden:i.plotlyReady},"折线图模块加载中....",8,_t),(0,n._)("div",{id:"graph",hidden:!1===i.plotlyReady},null,8,yt)])}var ft=o(8909),wt=o.n(ft),bt={components:{ElButton:r.mi,ElInputNumber:B.d6},name:"SayobotFastView",setup(){let t=document.createElement("script");t.setAttribute("src","https://cdn.plot.ly/plotly-latest.min.js"),document.getElementsByTagName("head")[0].appendChild(t)},data(){return{bid:1234567,sr:8,od:8,objCount:2e3,score:1e6,pp:this.$i18n.messages[this.$i18n.locale].message.info_enter_data,plotlyReady:!1}},methods:{cal(){let t={isConvert:!1,sr:this.sr,od:this.od,objCount:this.objCount,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:this.score},e=new U.m(t);if(this.pp=e.totalValue.toFixed(2),window.Plotly){this.plotlyReady=!0;let o=new U.O(t,e.maxScore);window.Plotly.newPlot("graph",[o.getTrace()],o.getLayout(),{scrollZoom:!0,responsive:!0})}},async getData(){try{let t=await wt().search(this.bid);this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.cal()}catch(t){this.pp=t}}}};const vt=(0,h.Z)(bt,[["render",gt],["__scopeId","data-v-2dc81ff1"]]);var Ct=vt;const xt=[{path:"/",name:"home",component:G},{path:"/sayo",name:"sayo",component:Ct},{path:"/about",name:"about",component:nt}],Dt=(0,y.p7)({history:(0,y.r5)(),routes:xt});var Mt=Dt,Et=o(6623),Tt=(0,Et.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),Ot=o(3490),Vt={page_mania_pp_cal:"Mania PP Calculation",page_mania_pp_cal_sayo:"Get Mapdata From Sayo",page_about:"About",option_mapIsConvert:"Converted",option_mapKeys:"Default Keys:",option_playKeys:"Play Keys:",option_stars:"Stars:",option_stars_with_mods:"Stars(With Mod):",option_od_without_mods:"OD(Without Mod):",option_od_with_mods:"With Mod:",option_od:"OD:",option_objCount:"Objects:",option_score:"Score:",option_maxScore:"Max Score:",option_sayo_only_mania_no_mod:"Mania Map Without Any Mod Only!",button_get_data_from_sayo:"Get Map Data",info_enter_data:"Calculate When Entering Data"},kt={page_mania_pp_cal:"mania pp计算",page_mania_pp_cal_sayo:"小夜帮填",page_about:"关于",option_mapIsConvert:"转谱",option_mapKeys:"谱面默认键数：",option_playKeys:"游玩键数：",option_stars:"谱面星数：",option_stars_with_mods:"谱面星数（Mod加成后）：",option_od_without_mods:"谱面OD（Mod加成前）：",option_od_with_mods:"加成后：",option_od:"谱面OD：",option_objCount:"谱面物件数：",option_score:"得分：",option_maxScore:"满分：",option_sayo_only_mania_no_mod:"仅只支持mania专谱的无mod成绩！",button_get_data_from_sayo:"从小夜获取数据",info_enter_data:"输入数据立即计算"};const Ht=(0,Ot.o)({locale:"zh",messages:{en:{message:Vt},zh:{message:kt}}});(0,s.ri)(_).use(Tt).use(Mt).use(Ht).mount("#app")}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,o),a.exports}o.m=t,function(){var t=[];o.O=function(e,s,n,a){if(!s){var i=1/0;for(d=0;d<t.length;d++){s=t[d][0],n=t[d][1],a=t[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&a||i>=a)&&Object.keys(o.O).every((function(t){return o.O[t](s[r])}))?s.splice(r--,1):(l=!1,a<i&&(i=a));if(l){t.splice(d--,1);var u=n();void 0!==u&&(e=u)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[s,n,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,a,i=s[0],l=s[1],r=s[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(r)var d=r(o)}for(e&&e(s);u<i.length;u++)a=i[u],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(d)},s=self["webpackChunkosumania_ppcal"]=self["webpackChunkosumania_ppcal"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(7095)}));s=o.O(s)})();