(function(){var t={4773:function(t){class s{constructor(t){this.isConvert=t.isConvert,this.mapKeys=t.mapKeys,this.playKeys=t.playKeys,this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.isHR=t.isHR,this.isEZ=t.isEZ,this.isDT=t.isDT,this.isHT=t.isHT,this.isNF=t.isNF,this.score=t.score,this.maxScore=1e6,this._score=this.getComputeScore(),this.difficultyValue=this.computeDifficultyValue(),this.accuracyValue=this.computeAccuracyValue(),this.totalValue=this.computeTotalValue()}computeDifficultyValue(){let t=1,s=Math.pow(5*Math.max(1,this.sr/.2)-4,2.2)/135;t*=s;let n=1+.1*Math.min(1,this.objCount/1500);t*=n;let i=0,e=this._score;return i=e<=5e5?0:e<=6e5?(e-5e5)/1e5*.3:e<=7e5?.3+(e-6e5)/1e5*.25:e<=8e5?.55+(e-7e5)/1e5*.2:e<=9e5?.75+(e-8e5)/1e5*.15:.9+(e-9e5)/1e5*.1,t*=i,t}getComputeScore(){let t=this.getScoreMultiplier();return this.maxScore=parseInt(this.maxScore*t),this.score/t}getScoreMultiplier(){let t=1;if(this.isConvert){let s=this.playKeys-this.mapKeys;s>0?t*=.9:s<0&&(t*=.9+.04*s)}return t*Math.pow(.5,this.isEZ+this.isHT+this.isNF)}computeAccuracyValue(){return Math.max(0,.2-.006667*(this.getHitWindow300()-34))*this.difficultyValue*Math.pow(Math.max(0,this._score-96e4)/4e4,1.1)}getHitWindow300(){const t=t=>(this.isHR?t/=1.4:this.isEZ&&(t*=1.4),t);if(!this.isConvert){let s=Math.min(10,Math.max(0,10-this.od));return t(34+3*s)}return this.od>=5?t(34):t(47)}computeTotalValue(){let t=.8;return this.isNF&&(t*=.9),this.isEZ&&(t*=.5),Math.pow(Math.pow(this.difficultyValue,1.1)+Math.pow(this.accuracyValue,1.1),1/1.1)*t}}t.exports=s},1149:function(t,s,n){const i=n(6265)["default"];class e{static async search(t){const s="https://api.sayobot.cn/v2/beatmapinfo?T=1&K="+t,n=await i.get(s);if(!n.data.data)throw"获取谱面详情失败";let e;if(n.data.data.bid_data.map((s=>{s.bid===t&&(e=s)})),!e)throw"查不到该谱面信息";if(3!==e.mode)throw"该谱面不是mania专谱";return{od:e.OD,sr:e.star,objCount:e.circles+e.sliders}}}t.exports=e},2081:function(t,s,n){"use strict";var i=n(9242),e=n(3396);const o={class:"app-tab"},a=(0,e.Uk)("mania pp计算"),l=(0,e.Uk)("还不快谢谢小夜"),r=(0,e.Uk)("关于"),u={class:"app-content"};function c(t,s,n,i,c,h){const d=(0,e.up)("router-link"),p=(0,e.up)("router-view");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",o,[(0,e.Wm)(d,{to:"/"},{default:(0,e.w5)((()=>[a])),_:1}),(0,e.Wm)(d,{to:"/sayo"},{default:(0,e.w5)((()=>[l])),_:1}),(0,e.Wm)(d,{to:"/about"},{default:(0,e.w5)((()=>[r])),_:1})]),(0,e._)("div",u,[(0,e.Wm)(p)])],64)}var h={name:"App"},d=n(89);const p=(0,d.Z)(h,[["render",c],["__scopeId","data-v-0e0ecdc5"]]);var m=p,_=n(678),b=n(7139);const f=t=>((0,e.dD)("data-v-838ea226"),t=t(),(0,e.Cn)(),t),y={class:"home"},v=f((()=>(0,e._)("label",{for:"isConvert"},"转谱",-1))),w=["hidden"],C=["hidden"],D=["hidden"],g=["hidden"],H=f((()=>(0,e._)("br",null,null,-1))),T=f((()=>(0,e._)("span",null,"谱面星数（Mod加成后）：★",-1))),M=f((()=>(0,e._)("br",null,null,-1))),O=f((()=>(0,e._)("span",null,"谱面OD（Mod加成前）：OD",-1))),x=["hidden"],V=["hidden"],Z=f((()=>(0,e._)("br",null,null,-1))),E=f((()=>(0,e._)("span",null,"谱面物件数：",-1))),k=f((()=>(0,e._)("br",null,null,-1))),K=f((()=>(0,e._)("span",null,"Mods：",-1))),j=f((()=>(0,e._)("br",null,null,-1))),F=f((()=>(0,e._)("span",null,"Mods：",-1))),R=f((()=>(0,e._)("br",null,null,-1))),N=f((()=>(0,e._)("span",null,"得分：",-1))),S=f((()=>(0,e._)("br",null,null,-1))),U=f((()=>(0,e._)("br",null,null,-1)));function I(t,s,n,o,a,l){return(0,e.wg)(),(0,e.iD)("div",y,[(0,e.wy)((0,e._)("input",{type:"checkbox",id:"isConvert","onUpdate:modelValue":s[0]||(s[0]=t=>a.isConvert=t),onChange:s[1]||(s[1]=(...t)=>l.cal&&l.cal(...t))},null,544),[[i.e8,a.isConvert]]),v,(0,e._)("span",{hidden:!1===a.isConvert},"谱面默认键数：",8,w),(0,e.wy)((0,e._)("input",{class:"short","onUpdate:modelValue":s[2]||(s[2]=t=>a.mapKeys=t),onInput:s[3]||(s[3]=(...t)=>l.changeMapKeys&&l.changeMapKeys(...t)),hidden:!1===a.isConvert},null,40,C),[[i.nr,a.mapKeys,void 0,{number:!0}]]),(0,e._)("span",{hidden:!1===a.isConvert},"游玩键数：",8,D),(0,e.wy)((0,e._)("input",{class:"short","onUpdate:modelValue":s[4]||(s[4]=t=>a.playKeys=t),onInput:s[5]||(s[5]=(...t)=>l.cal&&l.cal(...t)),hidden:!1===a.isConvert},null,40,g),[[i.nr,a.playKeys,void 0,{number:!0}]]),H,T,(0,e.wy)((0,e._)("input",{class:"short","onUpdate:modelValue":s[6]||(s[6]=t=>a.sr=t),onInput:s[7]||(s[7]=(...t)=>l.cal&&l.cal(...t))},null,544),[[i.nr,a.sr,void 0,{number:!0}]]),M,O,(0,e.wy)((0,e._)("input",{class:"short","onUpdate:modelValue":s[8]||(s[8]=t=>a.od=t),onInput:s[9]||(s[9]=(...t)=>l.OD2ModOD&&l.OD2ModOD(...t))},null,544),[[i.nr,a.od,void 0,{number:!0}]]),(0,e._)("span",{hidden:!(!0===a.isHR||!0===a.isEZ)},"加成后 OD",8,x),(0,e.wy)((0,e._)("input",{class:"short",hidden:!(!0===a.isHR||!0===a.isEZ),"onUpdate:modelValue":s[10]||(s[10]=t=>a.od_mod=t),onInput:s[11]||(s[11]=(...t)=>l.ModOD2OD&&l.ModOD2OD(...t))},null,40,V),[[i.nr,a.od_mod,void 0,{number:!0}]]),Z,E,(0,e.wy)((0,e._)("input",{class:"mid","onUpdate:modelValue":s[12]||(s[12]=t=>a.objCount=t),onInput:s[13]||(s[13]=(...t)=>l.cal&&l.cal(...t))},null,544),[[i.nr,a.objCount,void 0,{number:!0}]]),k,K,(0,e._)("button",{class:(0,b.C_)(a.isEZ?"checkedmod":""),onClick:s[14]||(s[14]=(...t)=>l.changeEZ&&l.changeEZ(...t))},"EZ",2),(0,e._)("button",{class:(0,b.C_)(a.isHT?"checkedmod":""),onClick:s[15]||(s[15]=(...t)=>l.changeHT&&l.changeHT(...t))},"HT",2),(0,e._)("button",{class:(0,b.C_)(a.isNF?"checkedmod":""),onClick:s[16]||(s[16]=(...t)=>l.changeNF&&l.changeNF(...t))},"NF",2),j,F,(0,e._)("button",{class:(0,b.C_)(a.isHR?"checkedmod":""),onClick:s[17]||(s[17]=(...t)=>l.changeHR&&l.changeHR(...t))},"HR",2),(0,e._)("button",{class:(0,b.C_)(a.isDT?"checkedmod":""),onClick:s[18]||(s[18]=(...t)=>l.changeDT&&l.changeDT(...t)),title:"这个mod在这里好像没什么用"}," DT ",2),R,N,(0,e.wy)((0,e._)("input",{class:"mid","onUpdate:modelValue":s[19]||(s[19]=t=>a.score=t),onInput:s[20]||(s[20]=(...t)=>l.cal&&l.cal(...t))},null,544),[[i.nr,a.score,void 0,{number:!0}]]),(0,e._)("span",null,"满分："+(0,b.zw)(a.maxScore),1),S,U,(0,e._)("span",null,"pp："+(0,b.zw)(a.pp),1)])}var z=n(4773),W=n.n(z),A={name:"HomeView",data(){return{isConvert:!1,mapKeys:4,playKeys:4,sr:8,od:8,od_mod:8,objCount:2e3,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:1e6,pp:"输入数据立即计算",maxScore:1e6}},methods:{OD2ModOD(){this.isEZ?this.od_mod=this.od/2:this.isHR?this.od_mod=Math.min(1.4*this.od,10).toFixed(2):this.od_mod=this.od,this.cal()},ModOD2OD(){this.isEZ?this.od=2*this.od_mod:this.isHR?this.od_mod>=10?this.od="???":this.od=(this.od_mod/1.4).toFixed(2):this.od=this.od_mod,this.cal()},changeMapKeys(){this.playKeys=this.mapKeys,this.cal()},cal(){if("???"===this.od)this.pp="???";else{let t={isConvert:this.isConvert,mapKeys:this.mapKeys,playKeys:this.playKeys,sr:this.sr,od:this.od,objCount:this.objCount,isHR:this.isHR,isEZ:this.isEZ,isDT:this.isDT,isHT:this.isHT,isNF:this.isNF,score:this.score},s=new(W())(t);this.pp=s.totalValue.toFixed(2),this.maxScore=s.maxScore,(this.score>this.maxScore||this.score===this.maxScore/2)&&(this.score=this.maxScore,this.cal())}},changeHR(){this.isHR=!this.isHR,this.isEZ=!1,this.OD2ModOD()},changeEZ(){this.isEZ=!this.isEZ,this.isHR=!1,this.OD2ModOD()},changeDT(){this.isDT=!this.isDT,this.isHT=!1,this.cal()},changeHT(){this.isHT=!this.isHT,this.isDT=!1,this.cal()},changeNF(){this.isNF=!this.isNF,this.cal()}}};const P=(0,d.Z)(A,[["render",I],["__scopeId","data-v-838ea226"]]);var Y=P;const q={class:"about"},B=(0,e._)("p",null,"更新日期：2022-3-19",-1),G=(0,e._)("p",null,"由 Exsper 创建",-1),J=(0,e._)("p",null,[(0,e.Uk)(" 有任何问题或建议可以"),(0,e._)("a",{href:"https://github.com/Exsper/osumania-ppcal/issues",target:"_blank"},"提交issue")],-1),L=[B,G,J];function Q(t,s){return(0,e.wg)(),(0,e.iD)("div",q,L)}const X={},$=(0,d.Z)(X,[["render",Q]]);var tt=$;const st=t=>((0,e.dD)("data-v-364a2a36"),t=t(),(0,e.Cn)(),t),nt={class:"home"},it=st((()=>(0,e._)("span",null,"仅只支持mania专谱的无mod成绩！",-1))),et=st((()=>(0,e._)("br",null,null,-1))),ot=st((()=>(0,e._)("span",null,"bid：",-1))),at=st((()=>(0,e._)("br",null,null,-1))),lt=st((()=>(0,e._)("br",null,null,-1))),rt=st((()=>(0,e._)("br",null,null,-1))),ut=st((()=>(0,e._)("br",null,null,-1))),ct=st((()=>(0,e._)("span",null,"得分：",-1))),ht=st((()=>(0,e._)("br",null,null,-1)));function dt(t,s,n,o,a,l){return(0,e.wg)(),(0,e.iD)("div",nt,[it,et,ot,(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.bid=t)},null,512),[[i.nr,a.bid,void 0,{number:!0}]]),(0,e._)("button",{onClick:s[1]||(s[1]=(...t)=>l.getData&&l.getData(...t))},"从小夜获取数据"),at,(0,e._)("span",null,"谱面星数：★"+(0,b.zw)(a.sr),1),lt,(0,e._)("span",null,"谱面OD："+(0,b.zw)(a.od),1),rt,(0,e._)("span",null,"谱面物件数："+(0,b.zw)(a.objCount),1),ut,ct,(0,e.wy)((0,e._)("input",{class:"mid","onUpdate:modelValue":s[2]||(s[2]=t=>a.score=t),onInput:s[3]||(s[3]=(...t)=>l.cal&&l.cal(...t))},null,544),[[i.nr,a.score,void 0,{number:!0}]]),ht,(0,e._)("span",null,"pp："+(0,b.zw)(a.pp),1)])}var pt=n(1149),mt=n.n(pt),_t={name:"SayobotFastView",data(){return{bid:1234567,sr:8,od:8,objCount:2e3,score:1e6,pp:"输入数据立即计算"}},methods:{cal(){let t={isConvert:!1,sr:this.sr,od:this.od,objCount:this.objCount,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:this.score},s=new(W())(t);this.pp=s.totalValue.toFixed(2)},async getData(){try{let t=await mt().search(this.bid);console.log(t),this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.cal()}catch(t){this.pp=t}}}};const bt=(0,d.Z)(_t,[["render",dt],["__scopeId","data-v-364a2a36"]]);var ft=bt;const yt=[{path:"/",name:"home",component:Y},{path:"/sayo",name:"sayo",component:ft},{path:"/about",name:"about",component:tt}],vt=(0,_.p7)({history:(0,_.r5)(),routes:yt});var wt=vt,Ct=n(65),Dt=(0,Ct.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,i.ri)(m).use(Dt).use(wt).mount("#app")}},s={};function n(i){var e=s[i];if(void 0!==e)return e.exports;var o=s[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(s,i,e,o){if(!i){var a=1/0;for(c=0;c<t.length;c++){i=t[c][0],e=t[c][1],o=t[c][2];for(var l=!0,r=0;r<i.length;r++)(!1&o||a>=o)&&Object.keys(n.O).every((function(t){return n.O[t](i[r])}))?i.splice(r--,1):(l=!1,o<a&&(a=o));if(l){t.splice(c--,1);var u=e();void 0!==u&&(s=u)}}return s}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[i,e,o]}}(),function(){n.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(s,{a:s}),s}}(),function(){n.d=function(t,s){for(var i in s)n.o(s,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};n.O.j=function(s){return 0===t[s]};var s=function(s,i){var e,o,a=i[0],l=i[1],r=i[2],u=0;if(a.some((function(s){return 0!==t[s]}))){for(e in l)n.o(l,e)&&(n.m[e]=l[e]);if(r)var c=r(n)}for(s&&s(i);u<a.length;u++)o=a[u],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},i=self["webpackChunkosumania_ppcal"]=self["webpackChunkosumania_ppcal"]||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(2081)}));i=n.O(i)})();