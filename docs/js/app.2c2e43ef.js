(function(){var t={5500:function(t){class s{constructor(t){this.isConvert=t.isConvert,this.mapKeys=t.mapKeys,this.playKeys=t.playKeys,this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.isHR=t.isHR,this.isEZ=t.isEZ,this.isDT=t.isDT,this.isHT=t.isHT,this.isNF=t.isNF,this.score=t.score,this.maxScore=1e6,this._score=this.getComputeScore(),this.difficultyValue=this.computeDifficultyValue(),this.accuracyValue=this.computeAccuracyValue(),this.totalValue=this.computeTotalValue()}computeDifficultyValue(){let t=1,s=Math.pow(5*Math.max(1,this.sr/.2)-4,2.2)/135;t*=s;let o=1+.1*Math.min(1,this.objCount/1500);t*=o;let e=0,a=this._score;return e=a<=5e5?0:a<=6e5?(a-5e5)/1e5*.3:a<=7e5?.3+(a-6e5)/1e5*.25:a<=8e5?.55+(a-7e5)/1e5*.2:a<=9e5?.75+(a-8e5)/1e5*.15:.9+(a-9e5)/1e5*.1,t*=e,t}getComputeScore(){let t=this.getScoreMultiplier();return this.maxScore=parseInt(this.maxScore*t),this.score/t}getScoreMultiplier(){let t=1;if(this.isConvert){let s=this.playKeys-this.mapKeys;s>0?t*=.9:s<0&&(t*=.9+.04*s)}return t*Math.pow(.5,this.isEZ+this.isHT+this.isNF)}computeAccuracyValue(){return Math.max(0,.2-.006667*(this.getHitWindow300()-34))*this.difficultyValue*Math.pow(Math.max(0,this._score-96e4)/4e4,1.1)}getHitWindow300(){const t=t=>(this.isHR?t/=1.4:this.isEZ&&(t*=1.4),t);if(!this.isConvert){let s=Math.min(10,Math.max(0,10-this.od));return t(34+3*s)}return this.od>=5?t(34):t(47)}computeTotalValue(){let t=.8;return this.isNF&&(t*=.9),this.isEZ&&(t*=.5),Math.pow(Math.pow(this.difficultyValue,1.1)+Math.pow(this.accuracyValue,1.1),1/1.1)*t}}t.exports=s},8909:function(t,s,o){const e=o(6265)["default"];class a{static async search(t){const s="https://api.sayobot.cn/v2/beatmapinfo?T=1&K="+t,o=await e.get(s);if(!o.data.data)throw"获取谱面详情失败";let a;if(o.data.data.bid_data.map((s=>{s.bid===t&&(a=s)})),!a)throw"查不到该谱面信息";if(3!==a.mode)throw"该谱面不是mania专谱";return{od:a.OD,sr:a.star,objCount:a.circles+a.sliders}}}t.exports=a},2783:function(t,s,o){"use strict";var e=o(9242),a=o(8606),n=(o(4415),o(4567),o(3402),o(6809),o(4583),o(9740)),i=o(4845),l=o(1267),r=o(3396),u=o(7139);function d(t,s,o,e,a,d){const c=i.E_,p=l.mi,h=i.Q8,m=(0,r.up)("router-view"),_=n.b2;return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(h,{"default-active":a.activeIndex,class:"el-menu-demo",mode:"horizontal",router:!0},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{index:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,u.zw)(t.$t("message.page_mania_pp_cal")),1)])),_:1}),(0,r.Wm)(c,{index:"/sayo"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,u.zw)(t.$t("message.page_mania_pp_cal_sayo")),1)])),_:1}),(0,r.Wm)(p,{class:"langbtn",onClick:d.changeLaguages},{default:(0,r.w5)((()=>[(0,r.Uk)((0,u.zw)(a.langText),1)])),_:1},8,["onClick"])])),_:1},8,["default-active"]),(0,r.Wm)(_,{class:"app-content"},{default:(0,r.w5)((()=>[(0,r.Wm)(m)])),_:1})],64)}var c=o(4870);const p=(0,c.iH)("/");var h={data(){return{activeIndex:p,lang:"zh",langText:"English"}},name:"App",methods:{changeLaguages(){this.lang="zh"===this.$i18n.locale?"en":"zh",this.$i18n.locale=this.lang,this.langText="zh"===this.lang?"English":"简体中文"}}},m=o(89);const _=(0,m.Z)(h,[["render",d],["__scopeId","data-v-23616a54"]]);var f=_,y=o(678),g=(o(6885),o(8839),o(8908),o(88),o(6939)),w=o(7610),b=o(6269),v=o(5951);const C=t=>((0,r.dD)("data-v-372da504"),t=t(),(0,r.Cn)(),t),D={class:"home"},x=["hidden"],M=["hidden"],V=["hidden"],H=["hidden"],k=C((()=>(0,r._)("br",null,null,-1))),O=C((()=>(0,r._)("br",null,null,-1))),T=["hidden"],W=["hidden"],z=C((()=>(0,r._)("br",null,null,-1))),K=C((()=>(0,r._)("br",null,null,-1))),E=C((()=>(0,r._)("span",null,"Mods：",-1))),j=(0,r.Uk)("EZ"),Z=(0,r.Uk)("NF"),I=(0,r.Uk)("HT"),S=(0,r.Uk)("HR"),$=(0,r.Uk)("DT"),F=C((()=>(0,r._)("br",null,null,-1))),U=C((()=>(0,r._)("br",null,null,-1))),R=C((()=>(0,r._)("br",null,null,-1)));function N(t,s,o,a,n,i){const d=v.Xb,c=b.d6,p=w.Dv,h=l.mi,m=g.dq;return(0,r.wg)(),(0,r.iD)("div",D,[(0,r.Wm)(d,{modelValue:n.isConvert,"onUpdate:modelValue":s[0]||(s[0]=t=>n.isConvert=t),onChange:i.cal,size:"large",border:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,u.zw)(t.$t("message.option_mapIsConvert")),1)])),_:1},8,["modelValue","onChange"]),(0,r._)("span",{hidden:!1===n.isConvert},(0,u.zw)(t.$t("message.option_mapKeys")),9,x),(0,r.wy)((0,r._)("input",{class:"short","onUpdate:modelValue":s[1]||(s[1]=t=>n.mapKeys=t),onInput:s[2]||(s[2]=(...t)=>i.changeMapKeys&&i.changeMapKeys(...t)),hidden:!1===n.isConvert},null,40,M),[[e.nr,n.mapKeys,void 0,{number:!0}]]),(0,r._)("span",{hidden:!1===n.isConvert},(0,u.zw)(t.$t("message.option_playKeys")),9,V),(0,r.wy)((0,r._)("input",{class:"short","onUpdate:modelValue":s[3]||(s[3]=t=>n.playKeys=t),onInput:s[4]||(s[4]=(...t)=>i.cal&&i.cal(...t)),hidden:!1===n.isConvert},null,40,H),[[e.nr,n.playKeys,void 0,{number:!0}]]),k,(0,r._)("span",null,(0,u.zw)(t.$t("message.option_stars_with_mods"))+" ★",1),(0,r.Wm)(c,{"controls-position":"right",class:"mx-4",modelValue:n.sr,"onUpdate:modelValue":s[5]||(s[5]=t=>n.sr=t),precision:2,step:.1,onInput:i.cal},null,8,["modelValue","step","onInput"]),O,(0,r._)("span",null,(0,u.zw)(t.$t("message.option_od_without_mods"))+" OD",1),(0,r.wy)((0,r._)("input",{class:"short","onUpdate:modelValue":s[6]||(s[6]=t=>n.od=t),onInput:s[7]||(s[7]=(...t)=>i.OD2ModOD&&i.OD2ModOD(...t))},null,544),[[e.nr,n.od,void 0,{number:!0}]]),(0,r._)("span",{hidden:!(!0===n.isHR||!0===n.isEZ)},(0,u.zw)(t.$t("message.option_od_with_mods"))+" OD",9,T),(0,r.wy)((0,r._)("input",{class:"short",hidden:!(!0===n.isHR||!0===n.isEZ),"onUpdate:modelValue":s[8]||(s[8]=t=>n.od_mod=t),onInput:s[9]||(s[9]=(...t)=>i.ModOD2OD&&i.ModOD2OD(...t))},null,40,W),[[e.nr,n.od_mod,void 0,{number:!0}]]),z,(0,r._)("span",null,(0,u.zw)(t.$t("message.option_objCount")),1),(0,r.Wm)(c,{class:"mx-4",min:0,step:200,modelValue:n.objCount,"onUpdate:modelValue":s[10]||(s[10]=t=>n.objCount=t),onInput:i.cal},null,8,["modelValue","onInput"]),K,(0,r.Wm)(m,{gutter:20},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{span:3},{default:(0,r.w5)((()=>[E])),_:1}),(0,r.Wm)(p,{span:2},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{type:"primary",plain:"",class:(0,u.C_)(n.isEZ?"checkedmod":""),onClick:i.changeEZ},{default:(0,r.w5)((()=>[j])),_:1},8,["class","onClick"])])),_:1}),(0,r.Wm)(p,{span:2},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{type:"primary",plain:"",class:(0,u.C_)(n.isNF?"checkedmod":""),onClick:i.changeNF},{default:(0,r.w5)((()=>[Z])),_:1},8,["class","onClick"])])),_:1}),(0,r.Wm)(p,{span:2},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{type:"primary",plain:"",class:(0,u.C_)(n.isHT?"checkedmod":""),onClick:i.changeHT},{default:(0,r.w5)((()=>[I])),_:1},8,["class","onClick"])])),_:1})])),_:1}),(0,r.Wm)(m,{gutter:20},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{span:2,offset:3},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{type:"primary",plain:"",class:(0,u.C_)(n.isHR?"checkedmod":""),onClick:i.changeHR},{default:(0,r.w5)((()=>[S])),_:1},8,["class","onClick"])])),_:1}),(0,r.Wm)(p,{span:2,offset:2},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{type:"primary",plain:"",class:(0,u.C_)(n.isDT?"checkedmod":""),onClick:i.changeDT},{default:(0,r.w5)((()=>[$])),_:1},8,["class","onClick"])])),_:1})])),_:1}),F,(0,r._)("span",null,(0,u.zw)(t.$t("message.option_score")),1),(0,r.Wm)(c,{class:"mx-4",min:0,max:1e6,step:1e5,modelValue:n.score,"onUpdate:modelValue":s[11]||(s[11]=t=>n.score=t),onInput:i.cal},null,8,["modelValue","onInput"]),(0,r._)("span",null,(0,u.zw)(t.$t("message.option_maxScore"))+(0,u.zw)(n.maxScore),1),U,R,(0,r._)("span",null,"PP："+(0,u.zw)(n.pp),1)])}var P=o(5500),A=o.n(P),G={name:"HomeView",data(){return{isConvert:!1,mapKeys:4,playKeys:4,sr:5,od:8,od_mod:8,objCount:1e3,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:1e6,pp:this.$i18n.messages[this.$i18n.locale].message.info_enter_data,maxScore:1e6}},methods:{OD2ModOD(){this.isEZ?this.od_mod=this.od/2:this.isHR?this.od_mod=Math.min(1.4*this.od,10).toFixed(2):this.od_mod=this.od,this.cal()},ModOD2OD(){this.isEZ?this.od=2*this.od_mod:this.isHR?this.od_mod>=10?this.od="???":this.od=(this.od_mod/1.4).toFixed(2):this.od=this.od_mod,this.cal()},changeMapKeys(){this.playKeys=this.mapKeys,this.cal()},cal(){if("???"===this.od)this.pp="???";else{let t={isConvert:this.isConvert,mapKeys:this.mapKeys,playKeys:this.playKeys,sr:this.sr,od:this.od,objCount:this.objCount,isHR:this.isHR,isEZ:this.isEZ,isDT:this.isDT,isHT:this.isHT,isNF:this.isNF,score:this.score},s=new(A())(t);this.pp=s.totalValue.toFixed(2),this.maxScore=s.maxScore,(this.score>this.maxScore||this.score===this.maxScore/2)&&(this.score=this.maxScore,this.cal())}},changeHR(){this.isHR=!this.isHR,this.isEZ=!1,this.OD2ModOD()},changeEZ(){this.isEZ=!this.isEZ,this.isHR=!1,this.OD2ModOD()},changeDT(){this.isDT=!this.isDT,this.isHT=!1,this.cal()},changeHT(){this.isHT=!this.isHT,this.isDT=!1,this.cal()},changeNF(){this.isNF=!this.isNF,this.cal()}}};const L=(0,m.Z)(G,[["render",N],["__scopeId","data-v-372da504"]]);var q=L;const Q={class:"about"},X=(0,r._)("p",null,"更新日期：2022-3-19",-1),Y=(0,r._)("p",null,"由 Exsper 创建",-1),B=(0,r._)("p",null,[(0,r.Uk)(" 有任何问题或建议可以"),(0,r._)("a",{href:"https://github.com/Exsper/osumania-ppcal/issues",target:"_blank"},"提交issue")],-1),J=[X,Y,B];function tt(t,s){return(0,r.wg)(),(0,r.iD)("div",Q,J)}const st={},ot=(0,m.Z)(st,[["render",tt]]);var et=ot;const at=t=>((0,r.dD)("data-v-7a6d6aba"),t=t(),(0,r.Cn)(),t),nt={class:"home"},it=at((()=>(0,r._)("br",null,null,-1))),lt=at((()=>(0,r._)("span",null,"bid：",-1))),rt=at((()=>(0,r._)("br",null,null,-1))),ut=at((()=>(0,r._)("br",null,null,-1))),dt=at((()=>(0,r._)("br",null,null,-1))),ct=at((()=>(0,r._)("br",null,null,-1))),pt=at((()=>(0,r._)("br",null,null,-1)));function ht(t,s,o,e,a,n){const i=b.d6,d=l.mi;return(0,r.wg)(),(0,r.iD)("div",nt,[(0,r._)("span",null,(0,u.zw)(t.$t("message.option_sayo_only_mania_no_mod")),1),it,lt,(0,r.Wm)(i,{controls:!1,class:"mx-4",modelValue:a.bid,"onUpdate:modelValue":s[0]||(s[0]=t=>a.bid=t),onInput:n.cal},null,8,["modelValue","onInput"]),(0,r.Wm)(d,{type:"primary",onClick:n.getData},{default:(0,r.w5)((()=>[(0,r.Uk)((0,u.zw)(t.$t("message.button_get_data_from_sayo")),1)])),_:1},8,["onClick"]),rt,(0,r._)("span",null,(0,u.zw)(t.$t("message.option_stars"))+" ★"+(0,u.zw)(a.sr),1),ut,(0,r._)("span",null,(0,u.zw)(t.$t("message.option_od"))+" "+(0,u.zw)(a.od),1),dt,(0,r._)("span",null,(0,u.zw)(t.$t("message.option_objCount"))+" "+(0,u.zw)(a.objCount),1),ct,(0,r._)("span",null,(0,u.zw)(t.$t("message.option_score")),1),(0,r.Wm)(i,{class:"mx-4",min:0,max:1e6,step:1e5,modelValue:a.score,"onUpdate:modelValue":s[1]||(s[1]=t=>a.score=t),onInput:n.cal},null,8,["modelValue","onInput"]),pt,(0,r._)("span",null,"PP："+(0,u.zw)(a.pp),1)])}var mt=o(8909),_t=o.n(mt),ft={name:"SayobotFastView",data(){return{bid:1234567,sr:8,od:8,objCount:2e3,score:1e6,pp:this.$i18n.messages[this.$i18n.locale].message.info_enter_data}},methods:{cal(){let t={isConvert:!1,sr:this.sr,od:this.od,objCount:this.objCount,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:this.score},s=new(A())(t);this.pp=s.totalValue.toFixed(2)},async getData(){try{let t=await _t().search(this.bid);console.log(t),this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.cal()}catch(t){this.pp=t}}}};const yt=(0,m.Z)(ft,[["render",ht],["__scopeId","data-v-7a6d6aba"]]);var gt=yt;const wt=[{path:"/",name:"home",component:q},{path:"/sayo",name:"sayo",component:gt},{path:"/about",name:"about",component:et}],bt=(0,y.p7)({history:(0,y.r5)(),routes:wt});var vt=bt,Ct=o(6623),Dt=(0,Ct.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),xt=o(3490),Mt={page_mania_pp_cal:"Mania PP Calculation",page_mania_pp_cal_sayo:"Get Mapdata From Sayo",page_about:"About",option_mapIsConvert:"Converted",option_mapKeys:"Default Keys:",option_playKeys:"Play Keys:",option_stars:"Stars:",option_stars_with_mods:"Stars(With Mod):",option_od_without_mods:"OD(Without Mod):",option_od_with_mods:"With Mod:",option_od:"OD:",option_objCount:"Objects:",option_score:"Score:",option_maxScore:"Max Score:",option_sayo_only_mania_no_mod:"Mania Map Without Any Mod Only!",button_get_data_from_sayo:"Get Map Data",info_enter_data:"Calculate When Entering Data"},Vt={page_mania_pp_cal:"mania pp计算",page_mania_pp_cal_sayo:"小夜帮填",page_about:"关于",option_mapIsConvert:"转谱",option_mapKeys:"谱面默认键数：",option_playKeys:"游玩键数：",option_stars:"谱面星数：",option_stars_with_mods:"谱面星数（Mod加成后）：",option_od_without_mods:"谱面OD（Mod加成前）：",option_od_with_mods:"加成后：",option_od:"谱面OD：",option_objCount:"谱面物件数：",option_score:"得分：",option_maxScore:"满分：",option_sayo_only_mania_no_mod:"仅只支持mania专谱的无mod成绩！",button_get_data_from_sayo:"从小夜获取数据",info_enter_data:"输入数据立即计算"};const Ht=(0,xt.o)({locale:"zh",messages:{en:{message:Mt},zh:{message:Vt}}});(0,e.ri)(f).use(Dt).use(vt).use(a.Z,{}).use(Ht).mount("#app")}},s={};function o(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}};return t[e].call(n.exports,n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(s,e,a,n){if(!e){var i=1/0;for(d=0;d<t.length;d++){e=t[d][0],a=t[d][1],n=t[d][2];for(var l=!0,r=0;r<e.length;r++)(!1&n||i>=n)&&Object.keys(o.O).every((function(t){return o.O[t](e[r])}))?e.splice(r--,1):(l=!1,n<i&&(i=n));if(l){t.splice(d--,1);var u=a();void 0!==u&&(s=u)}}return s}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[e,a,n]}}(),function(){o.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(s,{a:s}),s}}(),function(){o.d=function(t,s){for(var e in s)o.o(s,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};o.O.j=function(s){return 0===t[s]};var s=function(s,e){var a,n,i=e[0],l=e[1],r=e[2],u=0;if(i.some((function(s){return 0!==t[s]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(r)var d=r(o)}for(s&&s(e);u<i.length;u++)n=i[u],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(d)},e=self["webpackChunkosumania_ppcal"]=self["webpackChunkosumania_ppcal"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=o.O(void 0,[998],(function(){return o(2783)}));e=o.O(e)})();