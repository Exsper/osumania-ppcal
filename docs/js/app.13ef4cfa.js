(function(){var t={4773:function(t){class s{constructor(t){this.isConvert=t.isConvert,this.mapKeys=t.mapKeys,this.playKeys=t.playKeys,this.sr=t.sr,this.od=t.od,this.objCount=t.objCount,this.isHR=t.isHR,this.isEZ=t.isEZ,this.isDT=t.isDT,this.isHT=t.isHT,this.isNF=t.isNF,this.score=t.score,this.maxScore=1e6,this._score=this.getComputeScore(),this.difficultyValue=this.computeDifficultyValue(),this.accuracyValue=this.computeAccuracyValue(),this.totalValue=this.computeTotalValue()}computeDifficultyValue(){let t=1,s=Math.pow(5*Math.max(1,this.sr/.2)-4,2.2)/135;t*=s;let i=1+.1*Math.min(1,this.objCount/1500);t*=i;let e=0,n=this._score;return e=n<=5e5?0:n<=6e5?(n-5e5)/1e5*.3:n<=7e5?.3+(n-6e5)/1e5*.25:n<=8e5?.55+(n-7e5)/1e5*.2:n<=9e5?.75+(n-8e5)/1e5*.15:.9+(n-9e5)/1e5*.1,t*=e,t}getComputeScore(){let t=this.getScoreMultiplier();return this.maxScore=parseInt(this.maxScore*t),this.score/t}getScoreMultiplier(){let t=1;if(this.isConvert){let s=this.playKeys-this.mapKeys;s>0?t*=.9:s<0&&(t*=.9+.04*s)}return t*Math.pow(.5,this.isEZ+this.isHT+this.isNF)}computeAccuracyValue(){return Math.max(0,.2-.006667*(this.getHitWindow300()-34))*this.difficultyValue*Math.pow(Math.max(0,this._score-96e4)/4e4,1.1)}getHitWindow300(){const t=t=>(this.isHR?t/=1.4:this.isEZ&&(t*=1.4),t);if(!this.isConvert){let s=Math.min(10,Math.max(0,10-this.od));return t(34+3*s)}return this.od>=5?t(34):t(47)}computeTotalValue(){let t=.8;return this.isNF&&(t*=.9),this.isEZ&&(t*=.5),Math.pow(Math.pow(this.difficultyValue,1.1)+Math.pow(this.accuracyValue,1.1),1/1.1)*t}}t.exports=s},1482:function(t,s,i){"use strict";var e=i(9242),n=i(3396);const o={class:"app-tab"},a=(0,n.Uk)("mania pp计算"),l=(0,n.Uk)("关于"),r={class:"app-content"};function u(t,s,i,e,u,h){const c=(0,n.up)("router-link"),d=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",o,[(0,n.Wm)(c,{to:"/"},{default:(0,n.w5)((()=>[a])),_:1}),(0,n.Wm)(c,{to:"/about"},{default:(0,n.w5)((()=>[l])),_:1})]),(0,n._)("div",r,[(0,n.Wm)(d)])],64)}var h={name:"App"},c=i(89);const d=(0,c.Z)(h,[["render",u],["__scopeId","data-v-189eec20"]]);var p=d,m=i(678),_=i(7139);const f=t=>((0,n.dD)("data-v-2ff34b8e"),t=t(),(0,n.Cn)(),t),y={class:"home"},v=f((()=>(0,n._)("label",{for:"isConvert"},"转谱",-1))),b=["hidden"],g=["hidden"],C=["hidden"],D=["hidden"],H=f((()=>(0,n._)("br",null,null,-1))),w=f((()=>(0,n._)("span",null,"谱面星数（Mod加成后）：★",-1))),M=f((()=>(0,n._)("br",null,null,-1))),T=f((()=>(0,n._)("span",null,"谱面OD（Mod加成前）：OD",-1))),O=["hidden"],x=["hidden"],E=f((()=>(0,n._)("br",null,null,-1))),Z=f((()=>(0,n._)("span",null,"谱面物件数：",-1))),V=f((()=>(0,n._)("br",null,null,-1))),k=f((()=>(0,n._)("span",null,"Mods：",-1))),K=f((()=>(0,n._)("br",null,null,-1))),F=f((()=>(0,n._)("span",null,"Mods：",-1))),R=f((()=>(0,n._)("br",null,null,-1))),j=f((()=>(0,n._)("span",null,"得分：",-1))),N=f((()=>(0,n._)("br",null,null,-1))),S=f((()=>(0,n._)("br",null,null,-1)));function U(t,s,i,o,a,l){return(0,n.wg)(),(0,n.iD)("div",y,[(0,n.wy)((0,n._)("input",{type:"checkbox",id:"isConvert","onUpdate:modelValue":s[0]||(s[0]=t=>a.isConvert=t),onChange:s[1]||(s[1]=(...t)=>l.cal&&l.cal(...t))},null,544),[[e.e8,a.isConvert]]),v,(0,n._)("span",{hidden:!1===a.isConvert},"谱面默认键数：",8,b),(0,n.wy)((0,n._)("input",{class:"short","onUpdate:modelValue":s[2]||(s[2]=t=>a.mapKeys=t),onInput:s[3]||(s[3]=(...t)=>l.changeMapKeys&&l.changeMapKeys(...t)),hidden:!1===a.isConvert},null,40,g),[[e.nr,a.mapKeys,void 0,{number:!0}]]),(0,n._)("span",{hidden:!1===a.isConvert},"游玩键数：",8,C),(0,n.wy)((0,n._)("input",{class:"short","onUpdate:modelValue":s[4]||(s[4]=t=>a.playKeys=t),onInput:s[5]||(s[5]=(...t)=>l.cal&&l.cal(...t)),hidden:!1===a.isConvert},null,40,D),[[e.nr,a.playKeys,void 0,{number:!0}]]),H,w,(0,n.wy)((0,n._)("input",{class:"short","onUpdate:modelValue":s[6]||(s[6]=t=>a.sr=t),onInput:s[7]||(s[7]=(...t)=>l.cal&&l.cal(...t))},null,544),[[e.nr,a.sr,void 0,{number:!0}]]),M,T,(0,n.wy)((0,n._)("input",{class:"short","onUpdate:modelValue":s[8]||(s[8]=t=>a.od=t),onInput:s[9]||(s[9]=(...t)=>l.OD2ModOD&&l.OD2ModOD(...t))},null,544),[[e.nr,a.od,void 0,{number:!0}]]),(0,n._)("span",{hidden:!(!0===a.isHR||!0===a.isEZ)},"加成后 OD",8,O),(0,n.wy)((0,n._)("input",{class:"short",hidden:!(!0===a.isHR||!0===a.isEZ),"onUpdate:modelValue":s[10]||(s[10]=t=>a.od_mod=t),onInput:s[11]||(s[11]=(...t)=>l.ModOD2OD&&l.ModOD2OD(...t))},null,40,x),[[e.nr,a.od_mod,void 0,{number:!0}]]),E,Z,(0,n.wy)((0,n._)("input",{class:"mid","onUpdate:modelValue":s[12]||(s[12]=t=>a.objCount=t),onInput:s[13]||(s[13]=(...t)=>l.cal&&l.cal(...t))},null,544),[[e.nr,a.objCount,void 0,{number:!0}]]),V,k,(0,n._)("button",{class:(0,_.C_)(a.isEZ?"checkedmod":""),onClick:s[14]||(s[14]=(...t)=>l.changeEZ&&l.changeEZ(...t))},"EZ",2),(0,n._)("button",{class:(0,_.C_)(a.isHT?"checkedmod":""),onClick:s[15]||(s[15]=(...t)=>l.changeHT&&l.changeHT(...t))},"HT",2),(0,n._)("button",{class:(0,_.C_)(a.isNF?"checkedmod":""),onClick:s[16]||(s[16]=(...t)=>l.changeNF&&l.changeNF(...t))},"NF",2),K,F,(0,n._)("button",{class:(0,_.C_)(a.isHR?"checkedmod":""),onClick:s[17]||(s[17]=(...t)=>l.changeHR&&l.changeHR(...t))},"HR",2),(0,n._)("button",{class:(0,_.C_)(a.isDT?"checkedmod":""),onClick:s[18]||(s[18]=(...t)=>l.changeDT&&l.changeDT(...t)),title:"这个mod在这里好像没什么用"}," DT ",2),R,j,(0,n.wy)((0,n._)("input",{class:"mid","onUpdate:modelValue":s[19]||(s[19]=t=>a.score=t),onInput:s[20]||(s[20]=(...t)=>l.cal&&l.cal(...t))},null,544),[[e.nr,a.score,void 0,{number:!0}]]),(0,n._)("span",null,"满分："+(0,_.zw)(a.maxScore),1),N,S,(0,n._)("span",null,"pp："+(0,_.zw)(a.pp),1)])}var I=i(4773),W=i.n(I),A={name:"HomeView",data(){return{isConvert:!1,mapKeys:4,playKeys:4,sr:8,od:8,od_mod:8,objCount:2e3,isHR:!1,isEZ:!1,isDT:!1,isHT:!1,isNF:!1,score:1e6,pp:"输入数据立即计算",maxScore:1e6}},methods:{OD2ModOD(){this.isEZ?this.od_mod=this.od/2:this.isHR?this.od_mod=Math.min(1.4*this.od,10).toFixed(2):this.od_mod=this.od,this.cal()},ModOD2OD(){this.isEZ?this.od=2*this.od_mod:this.isHR?this.od_mod>=10?this.od="???":this.od=(this.od_mod/1.4).toFixed(2):this.od=this.od_mod,this.cal()},changeMapKeys(){this.playKeys=this.mapKeys,this.cal()},cal(){if("???"===this.od)this.pp="???";else{let t={isConvert:this.isConvert,mapKeys:this.mapKeys,playKeys:this.playKeys,sr:this.sr,od:this.od,objCount:this.objCount,isHR:this.isHR,isEZ:this.isEZ,isDT:this.isDT,isHT:this.isHT,isNF:this.isNF,score:this.score};console.log(t);let s=new(W())(t);this.pp=s.totalValue.toFixed(2),this.maxScore=s.maxScore,(this.score>this.maxScore||this.score===this.maxScore/2)&&(this.score=this.maxScore,this.cal())}},changeHR(){this.isHR=!this.isHR,this.isEZ=!1,this.OD2ModOD()},changeEZ(){this.isEZ=!this.isEZ,this.isHR=!1,this.OD2ModOD()},changeDT(){this.isDT=!this.isDT,this.isHT=!1,this.cal()},changeHT(){this.isHT=!this.isHT,this.isDT=!1,this.cal()},changeNF(){this.isNF=!this.isNF,this.cal()}}};const z=(0,c.Z)(A,[["render",U],["__scopeId","data-v-2ff34b8e"]]);var P=z;const Y={class:"about"},q=(0,n._)("p",null,"更新日期：2022-3-19",-1),B=(0,n._)("p",null,"由 Exsper 创建",-1),G=(0,n._)("p",null,[(0,n.Uk)(" 有任何问题或建议可以"),(0,n._)("a",{href:"https://github.com/Exsper/osumania-ppcal/issues",target:"_blank"},"提交issue")],-1),J=[q,B,G];function L(t,s){return(0,n.wg)(),(0,n.iD)("div",Y,J)}const Q={},X=(0,c.Z)(Q,[["render",L]]);var $=X;const tt=[{path:"/",name:"home",component:P},{path:"/about",name:"about",component:$}],st=(0,m.p7)({history:(0,m.r5)(),routes:tt});var it=st,et=i(65),nt=(0,et.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,e.ri)(p).use(nt).use(it).mount("#app")}},s={};function i(e){var n=s[e];if(void 0!==n)return n.exports;var o=s[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(s,e,n,o){if(!e){var a=1/0;for(h=0;h<t.length;h++){e=t[h][0],n=t[h][1],o=t[h][2];for(var l=!0,r=0;r<e.length;r++)(!1&o||a>=o)&&Object.keys(i.O).every((function(t){return i.O[t](e[r])}))?e.splice(r--,1):(l=!1,o<a&&(a=o));if(l){t.splice(h--,1);var u=n();void 0!==u&&(s=u)}}return s}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[e,n,o]}}(),function(){i.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(s,{a:s}),s}}(),function(){i.d=function(t,s){for(var e in s)i.o(s,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};i.O.j=function(s){return 0===t[s]};var s=function(s,e){var n,o,a=e[0],l=e[1],r=e[2],u=0;if(a.some((function(s){return 0!==t[s]}))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(r)var h=r(i)}for(s&&s(e);u<a.length;u++)o=a[u],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(h)},e=self["webpackChunkosumania_ppcal"]=self["webpackChunkosumania_ppcal"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=i.O(void 0,[998],(function(){return i(1482)}));e=i.O(e)})();